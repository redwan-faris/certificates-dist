"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[8870],{74674:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(50124),s=n(48534),a=(n(92222),n(62760)),i=n(57333);const u={createThesis:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,s.append("thesis_text",t.text),s.append("ending_page",t.pageEnd),s.append("starting_page",t.pageStart),s.append("user_book_id",n),s.append("images[]",t.image_1),e.next=8,a.h.post("/thesises",s,{headers:{"Content-Type":"multipart/form-data"}})["catch"]((function(e){console.log(e)}));case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),updatePicture:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,s.append("path",n),s.append("image",t),e.next=5,a.h.post("/thesises/update-photo",s,{headers:{"Content-Type":"multipart/form-data"}})["catch"]((function(e){console.log(e)}));case 5:return i=e.sent,e.abrupt("return",i.data.data);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),reviewThesis:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.patch("/thesises/review-thesis/".concat(t));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deleteThesis:function(e){var t=a.h["delete"]("/thesises/".concat(e));return t},acceptThesis:function(e,t){var n,r=null;"accept"==t?n=e:"audit"==t&&(r=e);var s=a.h.post("/thesises/review",{id:n,user_book_id:r,status:t,reviewer_id:i.Z.getUser().id});return s},rejectRetardThesis:function(e,t,n){var r=a.h.post("/thesises/review",{id:e,status:n,reviewer_id:i.Z.getUser().id,reviews:t});return r},addDegree:function(e,t,n){var r=a.h.patch("/thesises/add-degree/".concat(e),{auditor_id:i.Z.getUser().id,reviews:t,degree:n});return r},updateThesis:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.patch("thesises/".concat(n),t)["catch"]((function(e){console.log(e)}));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),getById:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.get("thesises/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getByBook:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.get("thesises/book/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getByUserBookStatus:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.get("thesises/by-status/".concat(t));case 2:return n=e.sent,n.data,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getByUserBook:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.get("thesises/user_book_id/".concat(t,"&").concat(n));case 2:return s=e.sent,s.data,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),deletePhoto:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h["delete"]("thesises/photo/".concat(t));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getPhotosCount:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.h.get("thesises/photo-count/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),uploadPhoto:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,s.append("image",t),e.next=4,a.h.post("/thesises/upload/".concat(n),s,{headers:{"Content-Type":"multipart/form-data"}})["catch"]((function(e){console.log(e)}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}},98870:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});n(68309);var r=n(66252),s=n(3577),a=n(97573),i={class:"row"},u={class:"col-sm-12"},o={class:"card position-relative inner-page-bg bg-primary",style:{height:"150px"}},c={class:"inner-page-title"},l=(0,r._)("h3",{class:"text-white"},"المراجعة والتدقيق",-1),h={class:"text-white"},d={key:0,class:"col-sm-12"},p=(0,r._)("div",{class:"iq-card-body p-0"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{src:a,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,r._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أطروحات")],-1),w={key:1,class:"col-sm-12"},f=(0,r._)("h4",{class:"card-title"},"أطروحات بحاجة للمراجعة",-1),v={class:"table-responsive"},g={id:"datatable",class:"table table-striped table-bordered"},_=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"اسم السفير"),(0,r._)("th",null,"اسم الكتاب"),(0,r._)("th",null,"عدد الأطروحات")])],-1),b=["onClick"],k={key:2,class:"col-sm-12"},m=(0,r._)("h4",{class:"card-title"},"أطروحات بحاجة للتدقيق",-1),Z={class:"table-responsive"},x={id:"datatable",class:"table table-striped table-bordered"},y=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"اسم السفير"),(0,r._)("th",null,"اسم الكتاب"),(0,r._)("th",null,"عدد الأطروحات")])],-1),T=["onClick"];function D(e,t,n,a,D,C){var R=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",u,[(0,r._)("div",o,[(0,r._)("div",c,[l,(0,r._)("p",h,"تبقى "+(0,s.zw)(C.totalTheses)+" كتاب",1)])])]),0==D.thesesToReview.length&&0==D.thesesToAudit.length?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(R,{class:"iq-card"},{default:(0,r.w5)((function(){return[p]})),_:1})])):(0,r.kq)("",!0),D.thesesToReview.length>0?((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(R,null,{headerTitle:(0,r.w5)((function(){return[f]})),body:(0,r.w5)((function(){return[(0,r._)("div",v,[(0,r._)("table",g,[_,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(D.thesesToReview,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,[(0,r._)("a",{href:"javascript:void(0);",onClick:function(t){return C.listThesis(e.user_book.id)}},(0,s.zw)(e.user_book.user.name),9,b)]),(0,r._)("td",null,(0,s.zw)(e.user_book.book.book_name),1),(0,r._)("td",null,(0,s.zw)(e.user_book.thesises.length),1)])})),128))])])])]})),_:1})])):(0,r.kq)("",!0),D.thesesToAudit.length>0?((0,r.wg)(),(0,r.iD)("div",k,[(0,r.Wm)(R,null,{headerTitle:(0,r.w5)((function(){return[m]})),body:(0,r.w5)((function(){return[(0,r._)("div",Z,[(0,r._)("table",x,[y,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(D.thesesToAudit,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,[(0,r._)("a",{href:"javascript:void(0);",onClick:function(t){return C.listThesis(e.user_book.id)}}," *************** ",8,T)]),(0,r._)("td",null,(0,s.zw)(e.user_book.book.book_name),1),(0,r._)("td",null,(0,s.zw)(e.user_book.thesises.length),1)])})),128))])])])]})),_:1})])):(0,r.kq)("",!0)])}var C=n(50124),R=n(48534),B=n(7701),q=n(57333),z=n(74674);const A={components:{iqCard:B.Z},name:"ListThesis",created:function(){var e=this;return(0,R.Z)((0,C.Z)().mark((function t(){return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("reviewer"!==q.Z.getRole()[0]&&"admin"!==q.Z.getRole()[0]){t.next=5;break}return e.status="review",t.next=4,e.getThesis(e.status);case 4:e.thesesToReview=t.sent;case 5:if("auditor"!==q.Z.getRole()[0]&&"admin"!==q.Z.getRole()[0]){t.next=10;break}return e.status="audit",t.next=9,e.getThesis(e.status);case 9:e.thesesToAudit=t.sent;case 10:case"end":return t.stop()}}),t)})))()},data:function(){return{thesesToReview:[],thesesToAudit:[],status:""}},methods:{getThesis:function(e){return(0,R.Z)((0,C.Z)().mark((function t(){return(0,C.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.Z.getByUserBookStatus(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},listThesis:function(e){this.$router.push({name:"thesis-review.thesis",params:{user_book_id:e}})}},computed:{totalTheses:function(){return this.thesesToAudit.length+this.thesesToReview.length}}};var U=n(83744);const P=(0,U.Z)(A,[["render",D]]),j=P},97573:(e,t,n)=>{e.exports=n.p+"img/export-congrats.05e72d52.png"}}]);
//# sourceMappingURL=8870.0d9beba6.js.map