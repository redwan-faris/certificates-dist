"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[4698],{4723:(e,n,t)=>{var r=t(46916),a=t(27007),o=t(19670),i=t(17466),s=t(41340),l=t(84488),u=t(58173),c=t(31530),m=t(97651);a("match",(function(e,n,t){return[function(n){var t=l(this),a=void 0==n?void 0:u(n,e);return a?r(a,n,t):new RegExp(n)[e](s(t))},function(e){var r=o(this),a=s(e),l=t(n,r,a);if(l.done)return l.value;if(!r.global)return m(r,a);var u=r.unicode;r.lastIndex=0;var d,f=[],p=0;while(null!==(d=m(r,a))){var g=s(d[0]);f[p]=g,""===g&&(r.lastIndex=c(a,i(r.lastIndex),u)),p++}return 0===p?null:f}]}))},91039:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(50124),a=t(48534),o=t(62760),i=t(57333);const s={getByStatus:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/status/".concat(n));case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getByUserBook:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/user_book_id/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getByBook:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/book/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addDegree:function(e,n,t){var r=o.h.patch("/general-informations/add-degree/".concat(e),{auditor_id:i.Z.getUser().id,reviews:n,degree:t});return r},getGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/user_book_id/".concat(n));case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.post("general-informations/",n);case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),updateGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.patch("general-informations/".concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n,t){return e.apply(this,arguments)}return n}(),acceptGeneralInformations:function(e){var n=o.h.post("/general-informations/review",{id:e,status:"audit",reviewer_id:i.Z.getUser().id});return n},rejectRetardGeneralInformations:function(e,n,t){var r=o.h.post("/general-informations/review",{id:e,status:t,reviewer_id:i.Z.getUser().id,reviews:n});return r},deleteGeneralInformation:function(e){var n=o.h["delete"]("/general-informations/".concat(e));return n},reviewGeneralInformation:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.patch("/general-informations/review-general-informations/".concat(n))["catch"]((function(e){})).then((function(e){return e}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getById:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()}},14698:(e,n,t)=>{t.r(n),t.d(n,{default:()=>be});var r=t(66252),a=t(3577),o=t(49963),i=t(44272),s=t(90475),l={class:"row"},u={class:"col-sm-12"},c={class:"iq-card-body profile-page p-0"},m={class:"profile-header"},d=(0,r._)("div",{class:"cover-container"},[(0,r._)("img",{src:i,alt:"profile-bg",class:"rounded img-fluid"})],-1),f={class:"user-detail text-center mb-3"},p=(0,r._)("div",{class:"profile-img"},[(0,r._)("img",{src:s,alt:"profile-img",class:"avatar-130 img-fluid"})],-1),g={class:"profile-detail mt-1"},v=(0,r._)("br",null,null,-1),h={key:0,class:""},_={class:"iq-card-body p-0"},w={class:"user-tabing"},b={class:"col-sm-12"},y={class:"tab-content"},k={class:"iq-card-body p-0"},I={class:"row"},x=(0,r._)("div",{class:"col-lg-4"},null,-1),Z={class:"col-12"},G={key:0},$={class:"col-sm-12"},q={class:"card card-block card-stretch card-height"},C={class:"card-body"},z={class:"user-post-data"},B={class:"d-flex justify-content-between"},F={class:"w-100"},D={class:"d-flex justify-content-between"},E={class:"w-100"},S={key:0,class:"mb-0 text-primary"},T={key:1,class:"alert alert-success w-100"},A={key:0,class:"card-post-toolbar text-end"},Q=(0,r._)("span",{class:"material-symbols-outlined"}," more_horiz ",-1),U=[Q],W=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," edit ",-1),j=(0,r.Uk)(" تعديل "),L=[W,j],O=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," delete ",-1),M=(0,r.Uk)(" حذف "),R=[O,M],V={class:"col-md-12 form-group"},P=(0,r._)("h4",{class:"form-label"},"التلخيص العام",-1),H={class:"form-control-plaintext"},J=(0,r._)("hr",null,null,-1),K={class:"col-md-12 form-group"},N={class:"col-md-12 form-group"},X=(0,r._)("h4",{class:"form-label"},"السؤال العام",-1),Y={class:"form-control-plaintext"},ee={key:1,id:"post-modal-data",class:"iq-card"},ne=(0,r._)("h4",{class:"card-title"},"إضافة التلخيص والفكرة العامة",-1),te={class:"d-flex align-items-center"},re={class:"form-group"},ae=(0,r._)("label",{class:"form-label",for:"bookGeneralIdea"},"الفكرة العامة",-1),oe={key:0,style:{color:"red"}},ie={class:"form-group"},se=(0,r._)("label",{class:"form-label",for:"bookGeneralQuestion"},"سؤال عام ",-1),le={key:0,style:{color:"red"}},ue=(0,r._)("input",{type:"submit",value:"اضافة",href:"javascript:void(0);",class:"btn btn-primary d-block mt-3 mb-3"},null,-1),ce=(0,r._)("hr",null,null,-1);function me(e,n,t,i,s,Q){var W=(0,r.up)("iq-card"),j=(0,r.up)("tab-nav-items"),O=(0,r.up)("tab-nav"),M=(0,r.up)("tab-content-item");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",u,[(0,r.Wm)(W,null,{default:(0,r.w5)((function(){return[(0,r._)("div",c,[(0,r._)("div",m,[d,(0,r._)("div",f,[p,(0,r._)("div",g,[v,s.book?((0,r.wg)(),(0,r.iD)("h3",h,(0,a.zw)(s.book.book_name)+" - قسم التلخيص والفكرة العامة ",1)):(0,r.kq)("",!0)])])])])]})),_:1}),(0,r.Wm)(W,{class:"iq-card"},{default:(0,r.w5)((function(){return[(0,r._)("div",_,[(0,r._)("div",w,[(0,r.Wm)(O,{pills:!0,id:"pills-tab",class:"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(j,{class:"w-100 p-0",active:!0,id:"pills-feed-tab",href:"#theses_container",ariaControls:"pills-home",role:"tab",ariaSelected:!0,title:"المرحلة الثانية - التلخيص والفكرة العامة"})]})),_:1})])])]})),_:1})]),(0,r._)("div",b,[(0,r._)("div",y,[(0,r.Wm)(M,{active:!0,id:"theses_container","aria-labelled-by":"pills-feed-tab"},{default:(0,r.w5)((function(){return[(0,r._)("div",k,[(0,r._)("div",I,[x,(0,r._)("div",Z,[s.generalInformations?((0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("div",$,[(0,r._)("div",q,[(0,r._)("div",C,[(0,r._)("div",z,[(0,r._)("div",B,[(0,r._)("div",F,[(0,r._)("div",D,[(0,r._)("div",E,[s.generalInformations.degree?((0,r.wg)(),(0,r.iD)("p",S," التقييم || "+(0,a.zw)(s.generalInformations.degree),1)):(0,r.kq)("",!0),s.generalInformations.reviews?((0,r.wg)(),(0,r.iD)("div",T,(0,a.zw)(s.generalInformations.reviews),1)):(0,r.kq)("",!0)]),null==s.generalInformations.status||"retard"==s.generalInformations.status?((0,r.wg)(),(0,r.iD)("div",A,[(0,r._)("div",{class:"dropdown-toggle",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",role:"button",onClick:n[0]||(n[0]=function(e){return s.show=!s.show})},U),(0,r._)("div",{class:(0,a.C_)("dropdown-menu dropdown-menu-right ".concat(s.show?"show":"")),"aria-labelledby":"dropdownMenuButton",style:{}},[(0,r._)("a",{class:"dropdown-item d-flex align-items-center",onClick:n[1]||(n[1]=function(e){return Q.updateGeneralInformation(s.generalInformations.id)})},L),(0,r._)("a",{class:"dropdown-item d-flex align-items-center",onClick:n[2]||(n[2]=function(e){return Q.deleteGeneralInformation(s.generalInformations.id)})},R)],2)])):(0,r.kq)("",!0)])])])]),(0,r._)("div",V,[P,(0,r._)("p",H,(0,a.zw)(s.generalInformations.summary),1)]),J,(0,r._)("div",K,[(0,r._)("div",N,[X,(0,r._)("p",Y,(0,a.zw)(s.generalInformations.general_question),1)])])])]),(0,r.Wm)(W,null,{body:(0,r.w5)((function(){return[null==s.generalInformations.status||"retard"==s.generalInformations.status?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary d-block w-100 mb-3",onClick:n[3]||(n[3]=function(){return Q.reviewGeneralInformation&&Q.reviewGeneralInformation.apply(Q,arguments)})}," اعتماد ")):(0,r.kq)("",!0),(0,r._)("button",{class:"btn btn-success d-block w-100",onClick:n[4]||(n[4]=function(e){return Q.back()})}," عودة لصفحة الانجاز ")]})),_:1})])])):((0,r.wg)(),(0,r.iD)("div",ee,[(0,r._)("div",null,[(0,r.Wm)(W,{id:"post-modal-data","body-class":"iq-card iq-card-block iq-card-stretch iq-card-height"},{headerTitle:(0,r.w5)((function(){return[ne]})),body:(0,r.w5)((function(){return[(0,r._)("div",te,[(0,r._)("form",{onSubmit:n[7]||(n[7]=(0,o.iM)((function(){return Q.submitGenralInformationsForm&&Q.submitGenralInformationsForm.apply(Q,arguments)}),["prevent"])),class:"post-text ml-3 w-100 row"},[(0,r._)("div",re,[ae,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":n[5]||(n[5]=function(e){return i.v$.generalInfromationsform.summary.$model=e}),rows:"5",placeholder:"... اكتب الفكرة العامة التي يدور حولها هذا الكتاب",class:"rounded form-control",id:"bookGeneralIdea"},null,512),[[o.nr,i.v$.generalInfromationsform.summary.$model]]),i.v$.generalInfromationsform.summary.$error?((0,r.wg)(),(0,r.iD)("small",oe,(0,a.zw)(s.summaryError?s.summaryError:"    لطفًا قم بكتابة تلخيص عدد حروفه بين 350 و 1800"),1)):(0,r.kq)("",!0)]),(0,r._)("div",ie,[se,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":n[6]||(n[6]=function(e){return i.v$.generalInfromationsform.general_question.$model=e}),rows:"5",placeholder:"... اكتب لنا السؤال العام الذي يجيب عليه هذا الكتاب",class:"rounded form-control",id:"bookGeneralQuestion"},null,512),[[o.nr,i.v$.generalInfromationsform.general_question.$model]]),i.v$.generalInfromationsform.general_question.$error?((0,r.wg)(),(0,r.iD)("small",le,(0,a.zw)(s.generalQuestionError?s.generalQuestionError:" قم بكتابة سؤال عام لا يزيد عدد حروفة عن 250"),1)):(0,r.kq)("",!0)]),ue],32)]),ce]})),_:1})])]))])])])]})),_:1})])])])}var de=t(50124),fe=t(48534),pe=(t(74916),t(4723),t(54028)),ge=t(62587),ve=t(91039);const he={setup:function(){return{v$:(0,pe.ZP)()}},name:"GeneralSummary",mounted:function(){this.getInformations()},validations:function(){return{generalInfromationsform:{general_question:{required:ge.C1,validate:this.validateGeneralQuestionText,minLength:(0,ge.Ei)(50),maxLength:(0,ge.BS)(100)},summary:{required:ge.C1,validate:this.validateGeneralSummaryText,minLength:(0,ge.Ei)(350),maxLength:(0,ge.BS)(1800)}}}},data:function(){return{auditable:!1,book:null,summaryError:"",generalQuestionError:"",generalInfromationsform:{general_question:"",summary:"",user_book_id:null},generalInformations:[],show:!1}},methods:{validateGeneralSummaryText:function(){var e=/^[a-zA-Z\u0600-\u06FF,\(\)?:;'"!.\s\d][\s\d\a-zA-Z\u0600-\u06FF,\(\)?:;'"!.][a-zA-Z\u0600-\u06FF,\(\)?:;'"!.\s\d][\s\d\a-zA-Z\u0600-\u06FF,\(\)?:;'"!.]*$/i,n=null!=this.generalInfromationsform.summary.match(e);return console.log(n),this.summaryError=n?"":"يجب ان يكون الادخال حروفا  او ارقاما فقط",n},validateGeneralQuestionText:function(){var e=/^[a-zA-Z\u0600-\u06FF,\(\)?:;'"!.\s\d][\s\d\a-zA-Z\u0600-\u06FF,\(\)?:;'"!.][a-zA-Z\u0600-\u06FF,\(\)?:;'"!.\s\d][\s\d\a-zA-Z\u0600-\u06FF,\(\)?:;'"!.]*$/i,n=null!=this.generalInfromationsform.general_question.match(e);return console.log(n),this.generalQuestionError=n?"":"يجب ان يكون الادخال حروفا  او ارقاما فقط",n},submitGenralInformationsForm:function(){var e=this;return(0,fe.Z)((0,de.Z)().mark((function n(){return(0,de.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.v$.$touch(),e.v$.generalInfromationsform.$invalid){n.next=7;break}return n.next=4,ve.Z.addGeneralInformations(e.generalInfromationsform);case 4:e.generalInformations=n.sent,e.v$.generalInfromationsform.general_question.$reset(),e.v$.generalInfromationsform.summary.$reset();case 7:case"end":return n.stop()}}),n)})))()},getInformations:function(){var e=this;return(0,fe.Z)((0,de.Z)().mark((function n(){var t;return(0,de.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ve.Z.getByBook(e.$route.params.id);case 2:t=n.sent,e.generalInformations=t.general_informations,e.generalInfromationsform.user_book_id=t.user_book.id,e.book=t.user_book.book,!e.generalInformations||"retard"!==e.generalInformations.status&&null!==e.generalInformations.status||(e.auditable=!0);case 7:case"end":return n.stop()}}),n)})))()},deleteGeneralInformation:function(e){this.show=!this.show;var n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"موافقتك تعني حذف هذا السؤال ",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(t){t.isConfirmed&&ve.Z.deleteGeneralInformation(e).then((function(e){n.fire({title:"تم الحذف",text:"تم حذف السؤال",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(e){console.log(e)}))}))},updateGeneralInformation:function(e){this.show=!this.show,this.$router.push({path:"/general/update/".concat(e)})},reviewGeneralInformation:function(){var e=this;return(0,fe.Z)((0,de.Z)().mark((function n(){var t;return(0,de.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t=e.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1}),t.fire({title:"هل أنت متأكد؟",text:"في حال الاعتماد لن يمكنك اضافة سؤال جديد أو التعديل على التلخيص الذي كتبته ",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالاعتماد",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(n){n.isConfirmed&&ve.Z.reviewGeneralInformation(e.generalInformations.user_book_id).then((function(e){t.fire({title:"تم الاعتماد",text:"تم اعتماد طلبك",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(e){console.log(e)}))}));case 2:case"end":return n.stop()}}),n)})))()},back:function(){this.$router.push({name:"achievement.steps",params:{id:this.$route.params.id}})}}};var _e=t(83744);const we=(0,_e.Z)(he,[["render",me]]),be=we},44272:(e,n,t)=>{e.exports=t.p+"img/book-banner.6a2a5a9c.png"},90475:(e,n,t)=>{e.exports=t.p+"img/reader.b5157672.png"}}]);
//# sourceMappingURL=4698.af1b8631.js.map