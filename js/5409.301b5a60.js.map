{"version":3,"file":"js/5409.301b5a60.js","mappings":"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","sources":["webpack://osboha180/./src/api/thesisServices.js","webpack://osboha180/./src/views/Theses/update.vue","webpack://osboha180/./src/views/Theses/update.vue?67d7"],"sourcesContent":["import { api } from \"./Intercepter\"\r\nimport userInfoService from \"../services/userInfo.service\";\r\nexport default {\r\n  createThesis: async (thesis, userbook_id) => {\r\n    let formData = new FormData();\r\n    formData.append(\"thesis_text\", thesis.text);\r\n    formData.append(\"ending_page\", thesis.pageEnd);\r\n    formData.append(\"starting_page\", thesis.pageStart);\r\n    formData.append(\"user_book_id\", userbook_id);\r\n    formData.append(\"images[]\", thesis.image_1);\r\n    const response = await api.post(\"/thesises\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response;\r\n  },\r\n\r\n\r\n  updatePicture: async (image, path) => {\r\n    let formData = new FormData();\r\n    formData.append(\"path\", path);\r\n    formData.append(\"image\", image);\r\n\r\n    const response = await api.post(\"/thesises/update-photo\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response.data.data;\r\n  },\r\n  reviewThesis: async (id) => {\r\n    const res = await api\r\n      .patch(`/thesises/review-thesis/${id}`)\r\n \r\n  },\r\n  deleteThesis(id) {\r\n    const response = api.delete(`/thesises/${id}`)\r\n    return response;\r\n  },\r\n  acceptThesis(id,status) {\r\n    let thesisId, user_book_id=null\r\n    if(status == 'accept'){\r\n      thesisId=id\r\n\r\n    }\r\n    else if(status == 'audit'){\r\n      user_book_id=id\r\n    }\r\n    const response = api.post(\"/thesises/review\", {\r\n      id: thesisId,\r\n      user_book_id: user_book_id,\r\n      status: status,\r\n      reviewer_id: userInfoService.getUser().id\r\n    })\r\n    return response;\r\n  },\r\n  rejectRetardThesis(id, note,status) {\r\n    const response = api.post(\"/thesises/review\", {\r\n      id: id,\r\n      status: status,\r\n      reviewer_id: userInfoService.getUser().id,\r\n      reviews: note\r\n    })\r\n    return response;\r\n  },\r\n  addDegree(id, note, mark) {\r\n    const response = api.patch(`/thesises/add-degree/${id}`, {\r\n      auditor_id: userInfoService.getUser().id,\r\n      reviews: note,\r\n      degree: mark\r\n      \r\n    })\r\n    return response;\r\n\r\n  },\r\n  updateThesis: async (thesis, id) => {\r\n    const response = await api.patch(`thesises/${id}`, thesis).catch(error => {\r\n\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response;\r\n  },\r\n  getById: async (id) => {\r\n    const response = await api.get(`thesises/${id}`);\r\n \r\n    return response.data.data;\r\n  },\r\n  getByBook: async (bookID) => {\r\n    const thesis = await api.get(`thesises/book/${bookID}`);\r\n \r\n    return thesis.data.data;\r\n  },\r\n  getByUserBookStatus: async (status) => {\r\n\r\n    const thesis = await api.get(`thesises/by-status/${status}`);\r\n    (thesis.data)\r\n    return thesis.data.data;\r\n  },\r\n  getByUserBook : async (user_book_id ,status) => {\r\n \r\n    const thesis = await api.get(`thesises/user_book_id/${user_book_id}&${status}`);\r\n    (thesis.data)\r\n    return thesis.data.data;\r\n},\r\n  deletePhoto: async (id) => {\r\n    const response = await api.delete(`thesises/photo/${id}`);\r\n  },\r\n\r\n  getPhotosCount: async (user_book_id) => {\r\n    const response = await api.get(`thesises/photo-count/${user_book_id}`);\r\n    return response.data.data;\r\n   \r\n  },\r\n\r\n\r\n  uploadPhoto: async (image, id) => {\r\n    let formData = new FormData();\r\n   \r\n    formData.append(\"image\", image);\r\n    const response = await api.post(`/thesises/upload/${id}`, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    ) \r\n    return response;\r\n  },\r\n\r\n }\r\n\r\n","<template>\r\n  <div class=\"col-sm-12 mt-3\">\r\n    <iq-card class=\"iq-card\">\r\n      <div class=\"iq-card-header-toolbar d-flex align-items-center mx-auto\">\r\n        <h3 class=\"text-center mt-3 mb-3\">تعديل الاطروحة</h3>\r\n      </div>\r\n      <div class=\"iq-card-body p-3\">\r\n        <div class=\"image-block text-center\">\r\n          <img\r\n            src=\"@/assets/images/update-forms.png\"\r\n            class=\"img-fluid rounded w-50\"\r\n            alt=\"blog-img\"\r\n          />\r\n        </div>\r\n\r\n        <div\r\n          class=\"d-flex align-items-center mt-3\"\r\n          v-if=\"\r\n            thesisToupdate.status == null || thesisToupdate.status == 'retard'\r\n          \"\r\n        >\r\n          <form @submit.prevent=\"submit\" class=\"post-text ml-3 w-100 row\">\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.starting_page.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة البداية</option>\r\n                <option\r\n                  v-for=\"(i, index) in book.pages\"\r\n                  :key=\"index\"\r\n                  :value=\"i\"\r\n                >\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n             <small style=\"color: red\" v-if=\"v$.thesis.starting_page.$error\"\r\n                >{{pageError ? pageError :' الرجاء قم بادخال صفحة البداية'}}</small\r\n              >\r\n            </div>\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.ending_page.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة النهاية</option>\r\n                <option\r\n                  v-for=\"(i, index) in book.pages\"\r\n                  :key=\"index\"\r\n                  :value=\"i\"\r\n                >\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n                <small style=\"color: red\" v-if=\"v$.thesis.ending_page.$error\"\r\n                >{{pageError ? pageError :' الرجاء قم بادخال صفحة النهاية'}}</small\r\n              >\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\" for=\"thesisBody\">الأطروحة</label>\r\n              <textarea\r\n                rows=\"5\"\r\n                placeholder=\"... اكتب أطروحتك\"\r\n                class=\"rounded form-control\"\r\n                id=\"thesisBody\"\r\n                v-model=\"v$.thesis.text.$model\"\r\n              ></textarea>\r\n              <p style=\"color: red\" v-if=\"v$.thesis.text.$error\">\r\n                الرجاء قم بكتابة الأطروحة\r\n              </p>\r\n            </div>\r\n\r\n \r\n\r\n            <div class=\"col-sm-12 text-center\" v-if=\"loader\">\r\n              <img\r\n                src=\"../../assets/images/page-img/page-load-loader.gif\"\r\n                alt=\"loader\"\r\n                style=\"height: 100px\"\r\n              />\r\n            </div>\r\n            <h4 class=\"text-center mt-3 mb-3\" v-if=\"message\">{{ message }}</h4>\r\n            <div class=\"d-inline-block w-100 text-center\">\r\n              <button\r\n                type=\"\"\r\n                @click=\"back()\"\r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n                v-if=\"message\"\r\n              >\r\n                عودة لصفحة الأنجاز\r\n              </button>\r\n              <input type=\"submit\" value=\"تعديل\" href=\"javascript:void(0);\" class=\"btn btn-primary d-block mt-3 w-100\"\r\n                v-else />\r\n          </div>\r\n            \r\n          </form>\r\n          \r\n        </div>\r\n        \r\n        <div class=\"d-flex align-items-center mt-3 row\" v-else>\r\n          <h4 class=\"text-center mt-3 mb-3 col-12\">\r\n            لا يمكنك تعديل السؤال لأنه في حالة التقييم أو تم تقييمه\r\n          </h4>\r\n          <div class=\"d-inline-block w-100 text-center col-12\">\r\n            <button\r\n              type=\"\"\r\n              @click=\"back()\"\r\n              class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n            >\r\n              عودة لصفحة الأنجاز\r\n            </button>\r\n            \r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n      \r\n    </iq-card>\r\n    \r\n  </div>\r\n\r\n <div class=\"col-sm-12 mt-3\">\r\n    <iq-card class=\"iq-card\">\r\n       <div class=\"iq-card-header-toolbar d-flex align-items-center mx-auto\">\r\n        <h3 class=\"text-center mt-3 mb-3\">تعديل صور الاطروحة</h3>\r\n      </div>\r\n         <div class=\"iq-card-body p-3\">\r\n      <div class=\"user-post\" v-if=\"thesis.photos\">\r\n              <div class=\"d-grid grid-rows-2 grid-flow-col gap-3\">\r\n                <div\r\n                  class=\"row-span-2 row-span-md-1\"\r\n                  v-for=\"(image,index) in thesis.photos\"\r\n                  :key=\"image.id\"\r\n                >\r\n                  <img\r\n                    :src=\"resolve_img_url(image)\"\r\n                    alt=\"post-image\"\r\n                    class=\"img-fluid rounded w-100\"\r\n                  />\r\n                  <hr>\r\n                    <input\r\n                class=\"form-control\"\r\n                type=\"file\"\r\n                id=\"customFile2\"\r\n                ref=\"file\"\r\n                @input=\"uploadImage(index,$event.target.files[0])\"\r\n                 \r\n              />\r\n              <small v-if=\"errors[index]\" style=\"color:red\"><p>الرجاء اختيار صورة اولا</p></small>\r\n               <button\r\n                type=\"\"\r\n                @click=\"updatePhoto(image,index)\"\r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n             \r\n              >\r\n              \r\n                    تعديل\r\n              </button> \r\n                 <button\r\n                type=\"\"\r\n                @click=\"deletePhoto(image)\"\r\n                class=\"btn d-block btn-danger mt-3 mb-3 w-75 mx-auto\"\r\n                v-if=\"photosCount > 3\"\r\n              >\r\n              \r\n                    حذف\r\n              </button> \r\n                </div>\r\n               <div\r\n                  class=\"row-span-2 row-span-md-1\"\r\n                  v-if=\"thesis.photos.length == 0\" >\r\n                  <img\r\n                  src=\"@/assets/images/stage2.png\"\r\n                    alt=\"post-image\"\r\n                    class=\"img-fluid rounded w-100\"\r\n                  />\r\n                  <hr>\r\n                    <input\r\n                class=\"form-control\"\r\n                type=\"file\"\r\n                id=\"customFile2\"\r\n                ref=\"file\"\r\n                   @input=\"uploadImage(2,$event.target.files[0])\"\r\n               \r\n  \r\n              />   <small v-if=\"errors[2]\" style=\"color:red\"><p>الرجاء اختيار صورة اولا</p></small>\r\n               <button\r\n                type=\"\"\r\n               \r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n              @click=\"uploadNewThesisImage()\"\r\n              >\r\n              \r\n                    رفع صورة \r\n              </button> \r\n                  \r\n               </div>\r\n              </div>\r\n            </div>\r\n         </div>\r\n             </iq-card>\r\n             </div>\r\n</template>\r\n<script>\r\nimport thesisServices from \"../../api/thesisServices\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, integer, requiredIf } from \"@vuelidate/validators\";\r\nimport IqCard from '../../components/custom/cards/iq-card.vue';\r\nexport default {\r\n  name: \"UpdateQuestion\",\r\n  async created() {\r\n    this.thesisToupdate = await thesisServices.getById(this.$route.params.id);\r\n     this.user_book_id = this.thesisToupdate.user_book.id\r\n    this.book = this.thesisToupdate.user_book.book;\r\n    this.thesis.text = this.thesisToupdate.thesis_text;\r\n    this.thesis.ending_page = this.thesisToupdate.ending_page;\r\n    this.thesis.starting_page = this.thesisToupdate.starting_page;\r\n    this.thesis.photos = this.thesisToupdate.photos;\r\n    await this.getPhotosCount();\r\n    console.log(this.photosCount)\r\n  },\r\n  components: {IqCard},\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  data() {\r\n    return {\r\n      user_book_id:0,\r\n      loader: false,\r\n      photosCount:0,\r\n      thesis: { \r\n        text: \"\",\r\n        starting_page: \"\",\r\n        ending_page: \"\",\r\n       \r\n      },\r\n      book: [],\r\n      upload:[],\r\n      files:[[],[],[]],\r\n      message: \"\",\r\n      thesisToupdate: [],\r\n      errors:[false,false,false]\r\n      ,pageError:''\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      thesis: {\r\n        text: {\r\n          required,\r\n        },\r\n        starting_page: {\r\n          required,valdiatePages:this.validatePages\r\n        },\r\n        ending_page: {\r\n          required,valdiatePages:this.validatePages\r\n        },\r\n       \r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n\r\n    async uploadNewThesisImage(){\r\n        await thesisServices.uploadPhoto(this.files[2],this.thesisToupdate.id);\r\n        window.location.reload()\r\n    },\r\n    \r\n    async getPhotosCount(){\r\n      const  count = await thesisServices.getPhotosCount(this.user_book_id)\r\n      this.photosCount = count;\r\n   \r\n    },\r\n      async deletePhoto(image){\r\n         await thesisServices.deletePhoto(image.id);\r\n         window.location.reload();\r\n    },\r\n      validatePages(){\r\n      const error =  parseInt(this.thesis.starting_page) < parseInt(this.thesis.ending_page)\r\n      \r\n      if(!error)this.pageError = 'يجب ان تكون صفحة البداية اقل من صفحة النهاية'\r\n      else this.pageError = ''\r\n      return error;\r\n    },\r\n    async submit() {\r\n      this.v$.$touch();\r\n      if (!this.v$.thesis.$invalid) {\r\n        this.message = \"\";\r\n        this.loader = true;\r\n        const thesis = await thesisServices.updateThesis(\r\n          this.thesis,\r\n          this.$route.params.id\r\n        );\r\n      \r\n        this.loader = false;\r\n        this.message = \"تم التعديل بنجاح\";\r\n      }\r\n    },\r\n    back() {\r\n      this.$router.push({ name: 'achievement.theses' , params: { id: this.thesisToupdate.user_book.book.id } })\r\n    },\r\n    resolve_img_url: function (image) {\r\n      const url = `https://www.eligible.osboha180.com/api/thesises/image?path=${image.path}`;\r\n      return url;\r\n    },\r\n   async updatePhoto(image,index){\r\n    \r\n      if(this.files[index].length === 0){\r\n        this.errors[index] = true\r\n      }else{\r\n     \r\n      const res =  await thesisServices.updatePicture(this.files[index],image.path);\r\n      this.thesis.photos[index] = res;\r\n      }\r\n    },\r\n     \r\n    uploadImage(index,file){\r\n      this.files[index] = file;\r\n      this.errors[index] = false;\r\n    }\r\n  },\r\n\r\n\r\n  \r\n};\r\n</script>\r\n","import { render } from \"./update.vue?vue&type=template&id=b93f7b9c\"\nimport script from \"./update.vue?vue&type=script&lang=js\"\nexport * from \"./update.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/redwan/personal/coding/project/osboha/certificates/certificates-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["createThesis","thesis","userbook_id","formData","FormData","append","text","pageEnd","pageStart","image_1","api","headers","error","console","log","response","updatePicture","image","path","data","reviewThesis","id","deleteThesis","acceptThesis","status","thesisId","user_book_id","reviewer_id","userInfoService","rejectRetardThesis","note","reviews","addDegree","mark","auditor_id","degree","updateThesis","getById","getByBook","bookID","getByUserBookStatus","getByUserBook","deletePhoto","getPhotosCount","uploadPhoto","class","_createElementVNode","src","_imports_0","alt","value","style","for","_imports_1","_hoisted_18","type","href","_hoisted_35","_imports_2","_hoisted_44","_createVNode","_component_iq_card","_hoisted_2","_hoisted_4","$data","_createElementBlock","onSubmit","$options","name","$setup","starting_page","$model","$event","_hoisted_7","_Fragment","_renderList","pages","i","index","key","_hoisted_8","$error","_toDisplayString","ending_page","_hoisted_11","_hoisted_12","_hoisted_15","rows","placeholder","_hoisted_19","onClick","_hoisted_24","_hoisted_27","photos","_hoisted_32","ref","onInput","target","files","_hoisted_36","_hoisted_37","_hoisted_38","length","_hoisted_40","_hoisted_41","_hoisted_45","created","thesisServices","$route","params","thesisToupdate","user_book","book","thesis_text","photosCount","components","IqCard","setup","v$","useVuelidate","loader","upload","message","errors","pageError","validations","required","valdiatePages","this","validatePages","methods","uploadNewThesisImage","window","location","reload","count","parseInt","submit","$touch","$invalid","back","$router","push","resolve_img_url","url","updatePhoto","res","uploadImage","file","__exports__","render"],"sourceRoot":""}